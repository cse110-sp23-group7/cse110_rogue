<!-- encounter1.html -->

<!DOCTYPE html>
<html>

<head>
    <title>Encounter</title>
    <link rel="stylesheet" type="text/css" href="../css/encounter.css">
</head>

<body>
    <div class="container">
        <div id="text-container">
            <div id="text-box">
                <div id="headshot-container">
                    <img src="../assets/misc/powell.jpeg" alt="Headshot" id="headshot-img">
                </div>
                <p id="text-content">You're having a conflict with your groupmates. What would you do?</p>
            </div>
            <button id="next-button">Next</button>
        </div>
        <div id="options-container">
            <button class="option-button" id="option1">Punch him in face</button>
            <button class="option-button" id="option2">Talk to group leaders and TA</button>
            <button class="option-button" id="option3">Not taking any actions</button>
            <button class="option-button" id="option4">Drop the course</button>
        </div>
    </div>

    <script src="../js/player.js"></script>
    <script>
        window.addEventListener('load', function () {
        // Hide the options container
        document.getElementById('options-container').style.display = 'none'
        })

        // Add click event listener to the next button
        document.getElementById('next-button').addEventListener('click', function () {
        // Hide the text container
        document.getElementById('text-container').style.display = 'none'
        // Show the options container
        document.getElementById('options-container').style.display = 'block'
        })

        // Add click event listeners to the option buttons
        const optionButtons = document.getElementsByClassName('option-button')
        const player = new Player(JSON.parse(localStorage.getItem('player')))

        for (let i = 0; i < optionButtons.length; i++) {
        optionButtons[i].addEventListener('click', function () {
            if (i == 0) {
                const ef = {
                    effects: {
                        rest: -2,
                        happiness: -5,
                        skills: {
                        test_taking: 0,
                        coding: 0,
                        thinking: -3
                        }
                    }
                };
                player.add_effect(ef);
                localStorage.setItem('player', JSON.stringify(player.player_obj));
            }
            if (i == 1) {
                const ef = {
                    effects: {
                        rest: 0,
                        happiness: 5,
                        skills: {
                        test_taking: 0,
                        coding: 0,
                        thinking: 2
                        }
                    }
                };
                player.add_effect(ef);
                localStorage.setItem('player', JSON.stringify(player.player_obj));
            }
            if (i == 2) {
                const ef = {
                    effects: {
                        rest: 2,
                        happiness: -3,
                        skills: {
                        test_taking: 0,
                        coding: 0,
                        thinking: -3
                        }
                    }
                };
                player.add_effect(ef);
                localStorage.setItem('player', JSON.stringify(player.player_obj));
            }
            if (i == 3) {
                const ef = {
                    effects: {
                        rest: 10,
                        happiness: 10,
                        skills: {
                        test_taking: -10,
                        coding: -10,
                        thinking: -10
                        }
                    }
                };
                player.add_effect(ef);
                localStorage.setItem('player', JSON.stringify(player.player_obj));
            }  
            window.location.href = '../html/fortune.html'
        })
        }
    </script>
</body>

</html>